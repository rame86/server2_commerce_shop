<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.shop.mapper.ProductMapper">

    <select id="findAllActive" resultType="com.example.shop.model.Product">
        SELECT * FROM shop.products WHERE is_active = TRUE ORDER BY created_at DESC
    </select>

    <insert id="insertProduct" parameterType="com.example.shop.model.Product">
        INSERT INTO shop.products (
            seller_id, seller_type, category, title, description, price, stock_quantity
        ) VALUES (
            #{sellerId}, 
            #{sellerType}::shop.seller_type, 
            #{category}::shop.product_category, 
            #{title}, 
            #{description}, 
            #{price}, 
            #{stockQuantity}
        )
    </insert>
</mapper>